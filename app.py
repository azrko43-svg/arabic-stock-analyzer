import streamlit as st
import pandas as pd
import numpy as np
import yfinance as yf
import plotly.graph_objects as go
from plotly.subplots import make_subplots
import ta

# ุชูููู ุงูุตูุญุฉ
st.set_page_config(
    page_title="ูุญูู ุงูุฃุณูู ุงูููู",
    page_icon="๐",
    layout="wide"
)

# ุชุนุฑูุจ ุงูุนููุงู
st.markdown("<h1 style='text-align: center;'>ูุญูู ุงูุฃุณูู ุงูููู</h1>", unsafe_allow_html=True)
st.markdown("<h3 style='text-align: center;'>ุฃุฏุงุฉ ููุชุญููู ุงูููู ููุฃุณูู ุจุงูุนุฑุจูุฉ</h3>", unsafe_allow_html=True)

# ุงูุดุฑูุท ุงูุฌุงูุจู ููุฅุนุฏุงุฏุงุช
with st.sidebar:
    st.header("ุฅุนุฏุงุฏุงุช ุงูุชุญููู")
    
    # ุฅุฏุฎุงู ุฑูุฒ ุงูุณูู
    ุฑูุฒ_ุงูุณูู = st.text_input("ุฑูุฒ ุงูุณูู (ูุซุงู: AAPL ูุดุฑูุฉ ุฃุจู)", value="AAPL")
    
    # ุงุฎุชูุงุฑ ุงููุชุฑุฉ ุงูุฒูููุฉ
    ูุชุฑุฉ = st.selectbox(
        "ุงููุชุฑุฉ ุงูุฒูููุฉ",
        options=["1mo", "3mo", "6mo", "1y", "2y", "5y", "max"],
        format_func=lambda x: {
            "1mo": "ุดูุฑ ูุงุญุฏ",
            "3mo": "3 ุฃุดูุฑ",
            "6mo": "6 ุฃุดูุฑ",
            "1y": "ุณูุฉ ูุงุญุฏุฉ",
            "2y": "ุณูุชุงู",
            "5y": "5 ุณููุงุช",
            "max": "ุงูุญุฏ ุงูุฃูุตู"
        }.get(x),
        index=3
    )
    
    # ุงุฎุชูุงุฑ ููุน ุงูุชุญููู
    ููุน_ุงูุชุญููู = st.radio(
        "ุงุฎุชุฑ ููุน ุงูุชุญููู",
        ["ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ", "ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ (RSI)", "ููุฌุงุช ุฅูููุช", "ุนุฑุถ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ"]
    )
    
    # ุฅุนุฏุงุฏุงุช ุฎุงุตุฉ ุจูู ููุน ุชุญููู
    if ููุน_ุงูุชุญููู == "ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ":
        ูุชุฑุฉ_ูุตูุฑุฉ = st.slider("ูุชุฑุฉ ุงููุชูุณุท ุงููุชุญุฑู ุงููุตูุฑ", 5, 50, 20)
        ูุชุฑุฉ_ุทูููุฉ = st.slider("ูุชุฑุฉ ุงููุชูุณุท ุงููุชุญุฑู ุงูุทููู", 20, 200, 50)
    
    elif ููุน_ุงูุชุญููู == "ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ (RSI)":
        ูุชุฑุฉ_rsi = st.slider("ูุชุฑุฉ ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ", 5, 30, 14)
        ูุณุชูู_ุชุดุจุน_ุดุฑุงุก = st.slider("ูุณุชูู ุชุดุจุน ุงูุดุฑุงุก", 60, 90, 70)
        ูุณุชูู_ุชุดุจุน_ุจูุน = st.slider("ูุณุชูู ุชุดุจุน ุงูุจูุน", 10, 40, 30)
    
    # ุฒุฑ ุชูููุฐ ุงูุชุญููู
    ุชุญููู = st.button("ุชุญููู", use_container_width=True)

# ุชุญููู ุงูุจูุงูุงุช
@st.cache_data(ttl=3600)  # ุชุฎุฒูู ูุคูุช ููุจูุงูุงุช ููุฏุฉ ุณุงุนุฉ
def ุฌูุจ_ุจูุงูุงุช(ุฑูุฒ_ุงูุณูู, ูุชุฑุฉ):
    try:
        ุจูุงูุงุช = yf.download(ุฑูุฒ_ุงูุณูู, period=ูุชุฑุฉ)
        if ุจูุงูุงุช.empty:
            st.error(f"ูุง ูููู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ููุฑูุฒ: {ุฑูุฒ_ุงูุณูู}")
            return None
        return ุจูุงูุงุช
    except Exception as e:
        st.error(f"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชุญููู ุงูุจูุงูุงุช: {e}")
        return None

# ูุฆุฉ ุงูุชุญููู ุงูููู
class ูุญูู_ููู:
    def __init__(self, ุจูุงูุงุช, ุฑูุฒ_ุงูุณูู):
        self.ุจูุงูุงุช = ุจูุงูุงุช
        self.ุฑูุฒ_ุงูุณูู = ุฑูุฒ_ุงูุณูู
    
    def ุชุญููู_ุงููุชูุณุทุงุช_ุงููุชุญุฑูุฉ(self, ูุชุฑุฉ_ูุตูุฑุฉ=20, ูุชุฑุฉ_ุทูููุฉ=50):
        """ุชุญููู ุชูุงุทุน ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ"""
        df = self.ุจูุงูุงุช.copy()
        df[f'MA_{ูุชุฑุฉ_ูุตูุฑุฉ}'] = df['Close'].rolling(window=ูุชุฑุฉ_ูุตูุฑุฉ).mean()
        df[f'MA_{ูุชุฑุฉ_ุทูููุฉ}'] = df['Close'].rolling(window=ูุชุฑุฉ_ุทูููุฉ).mean()
        
        # ุฅุดุงุฑุงุช ุงูุดุฑุงุก ูุงูุจูุน
        df['ุฅุดุงุฑุฉ'] = 0
        df['ุฅุดุงุฑุฉ'] = np.where(df[f'MA_{ูุชุฑุฉ_ูุตูุฑุฉ}'] > df[f'MA_{ูุชุฑุฉ_ุทูููุฉ}'], 1, 0)
        df['ุฅุดุงุฑุฉ_ุชุบููุฑ'] = df['ุฅุดุงุฑุฉ'].diff()
        
        # ุฅุดุงุฑุฉ ุดุฑุงุก = 1ุ ุฅุดุงุฑุฉ ุจูุน = -1
        df['ุดุฑุงุก'] = np.where(df['ุฅุดุงุฑุฉ_ุชุบููุฑ'] == 1, df['Close'], np.nan)
        df['ุจูุน'] = np.where(df['ุฅุดุงุฑุฉ_ุชุบููุฑ'] == -1, df['Close'], np.nan)
        
        # ุฑุณู ุจูุงูู
        fig = make_subplots(rows=1, cols=1)
        
        # ุฅุถุงูุฉ ุณุนุฑ ุงูุฅุบูุงู
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['Close'],
            mode='lines',
            name='ุณุนุฑ ุงูุฅุบูุงู',
            line=dict(color='black', width=2)
        ))
        
        # ุฅุถุงูุฉ ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df[f'MA_{ูุชุฑุฉ_ูุตูุฑุฉ}'],
            mode='lines',
            name=f'ุงููุชูุณุท ุงููุชุญุฑู {ูุชุฑุฉ_ูุตูุฑุฉ}',
            line=dict(color='blue', width=1.5)
        ))
        
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df[f'MA_{ูุชุฑุฉ_ุทูููุฉ}'],
            mode='lines',
            name=f'ุงููุชูุณุท ุงููุชุญุฑู {ูุชุฑุฉ_ุทูููุฉ}',
            line=dict(color='red', width=1.5)
        ))
        
        # ุฅุถุงูุฉ ุฅุดุงุฑุงุช ุงูุดุฑุงุก ูุงูุจูุน
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['ุดุฑุงุก'],
            mode='markers',
            name='ุฅุดุงุฑุฉ ุดุฑุงุก',
            marker=dict(color='green', size=10, symbol='triangle-up')
        ))
        
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['ุจูุน'],
            mode='markers',
            name='ุฅุดุงุฑุฉ ุจูุน',
            marker=dict(color='red', size=10, symbol='triangle-down')
        ))
        
        # ุชุนุฏูู ุงูุชุฎุทูุท
        fig.update_layout(
            title=f'ุชุญููู ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ ูู {self.ุฑูุฒ_ุงูุณูู}',
            xaxis_title='ุงูุชุงุฑูุฎ',
            yaxis_title='ุงูุณุนุฑ',
            template='plotly_white',
            height=600
        )
        
        return fig, df
    
    def ุชุญููู_ูุคุดุฑ_ุงูููุฉ_ุงููุณุจูุฉ(self, ูุชุฑุฉ=14, ูุณุชูู_ุชุดุจุน_ุดุฑุงุก=70, ูุณุชูู_ุชุดุจุน_ุจูุน=30):
        """ุชุญููู ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ (RSI)"""
        df = self.ุจูุงูุงุช.copy()
        df['RSI'] = ta.momentum.RSIIndicator(df['Close'], window=ูุชุฑุฉ).rsi()
        
        # ุฅุดุงุฑุงุช ุงูุดุฑุงุก ูุงูุจูุน
        df['ุดุฑุงุก_RSI'] = np.where(df['RSI'] < ูุณุชูู_ุชุดุจุน_ุจูุน, df['Close'], np.nan)
        df['ุจูุน_RSI'] = np.where(df['RSI'] > ูุณุชูู_ุชุดุจุน_ุดุฑุงุก, df['Close'], np.nan)
        
        # ุฑุณู ุจูุงูู
        fig = make_subplots(rows=2, cols=1, shared_xaxes=True, 
                           vertical_spacing=0.1, row_heights=[0.7, 0.3])
        
        # ุฅุถุงูุฉ ุณุนุฑ ุงูุฅุบูุงู
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['Close'],
            mode='lines',
            name='ุณุนุฑ ุงูุฅุบูุงู',
            line=dict(color='black', width=2)
        ), row=1, col=1)
        
        # ุฅุถุงูุฉ ุฅุดุงุฑุงุช ุงูุดุฑุงุก ูุงูุจูุน
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['ุดุฑุงุก_RSI'],
            mode='markers',
            name='ุฅุดุงุฑุฉ ุดุฑุงุก (RSI)',
            marker=dict(color='green', size=10, symbol='triangle-up')
        ), row=1, col=1)
        
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['ุจูุน_RSI'],
            mode='markers',
            name='ุฅุดุงุฑุฉ ุจูุน (RSI)',
            marker=dict(color='red', size=10, symbol='triangle-down')
        ), row=1, col=1)
        
        # ุฅุถุงูุฉ ูุคุดุฑ RSI
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['RSI'],
            mode='lines',
            name='ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ',
            line=dict(color='purple', width=1.5)
        ), row=2, col=1)
        
        # ุฅุถุงูุฉ ุฎุทูุท ูุณุชููุงุช ุชุดุจุน ุงูุดุฑุงุก ูุงูุจูุน
        fig.add_hline(y=ูุณุชูู_ุชุดุจุน_ุดุฑุงุก, line_dash="dash", line_color="red", row=2, col=1)
        fig.add_hline(y=ูุณุชูู_ุชุดุจุน_ุจูุน, line_dash="dash", line_color="green", row=2, col=1)
        
        # ุชุนุฏูู ุงูุชุฎุทูุท
        fig.update_layout(
            title=f'ุชุญููู ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ ูู {self.ุฑูุฒ_ุงูุณูู}',
            xaxis_title='ุงูุชุงุฑูุฎ',
            template='plotly_white',
            height=700
        )
        
        fig.update_yaxes(title_text="ุงูุณุนุฑ", row=1, col=1)
        fig.update_yaxes(title_text="RSI", row=2, col=1)
        
        return fig, df
    
    def ุชุญููู_ููุฌุงุช_ุฅูููุช(self):
        """ุชุญููู ููุฌุงุช ุฅูููุช (ูููุฐุฌ ูุจุณุท)"""
        df = self.ุจูุงูุงุช.copy()
        
        # ุชุญุฏูุฏ ุงูููุงุท ุงููุญูุฑูุฉ (ูุจุณุท)
        window_size = 10
        df['min_local'] = df['Close'].rolling(window=window_size, center=True).min()
        df['max_local'] = df['Close'].rolling(window=window_size, center=True).max()
        
        pivots = []
        dates = []
        prices = []
        types = []  # 'min' ุฃู 'max'
        
        # ุชุญุฏูุฏ ุงูููุงุท ุงููุญูุฑูุฉ ุงูุจุณูุทุฉ
        for i in range(window_size, len(df)-window_size):
            if df['Close'].iloc[i] == df['min_local'].iloc[i]:
                if len(types) == 0 or types[-1] == 'max':
                    pivots.append(i)
                    dates.append(df.index[i])
                    prices.append(df['Close'].iloc[i])
                    types.append('min')
            elif df['Close'].iloc[i] == df['max_local'].iloc[i]:
                if len(types) == 0 or types[-1] == 'min':
                    pivots.append(i)
                    dates.append(df.index[i])
                    prices.append(df['Close'].iloc[i])
                    types.append('max')
            
            if len(pivots) >= 9:  # ูุญุชุงุฌ ุฅูู 9 ููุงุท ููููุฌุงุช ุงูุฎูุณ (5 ููุฌุงุช ุตุงุนุฏุฉ + 3 ููุฌุงุช ูุงุจุทุฉ + 1)
                break
        
        # ุฑุณู ุจูุงูู
        fig = go.Figure()
        
        # ุฅุถุงูุฉ ุณุนุฑ ุงูุฅุบูุงู
        fig.add_trace(go.Scatter(
            x=df.index,
            y=df['Close'],
            mode='lines',
            name='ุณุนุฑ ุงูุฅุบูุงู',
            line=dict(color='black', width=2)
        ))
        
        # ุฅุถุงูุฉ ุงูููุงุท ุงููุญูุฑูุฉ
        if len(dates) >= 5:
            wave_labels = ['1', '2', '3', '4', '5', 'A', 'B', 'C']
            fig.add_trace(go.Scatter(
                x=dates[:min(len(dates), 8)],
                y=prices[:min(len(prices), 8)],
                mode='markers+lines+text',
                name='ููุฌุงุช ุฅูููุช',
                marker=dict(size=10, color='blue'),
                text=wave_labels[:min(len(dates), 8)],
                textposition="top center"
            ))
        
        # ุชุนุฏูู ุงูุชุฎุทูุท
        fig.update_layout(
            title=f'ุชุญููู ููุฌุงุช ุฅูููุช ูู {self.ุฑูุฒ_ุงูุณูู} (ูููุฐุฌ ูุจุณุท)',
            xaxis_title='ุงูุชุงุฑูุฎ',
            yaxis_title='ุงูุณุนุฑ',
            template='plotly_white',
            height=600
        )
        
        return fig, df

# ุชูููุฐ ุงูุชุญููู ุนูุฏ ุงูููุฑ ุนูู ุฒุฑ ุงูุชุญููู
if ุชุญููู or 'ุจูุงูุงุช' not in st.session_state:
    with st.spinner('ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...'):
        ุจูุงูุงุช = ุฌูุจ_ุจูุงูุงุช(ุฑูุฒ_ุงูุณูู, ูุชุฑุฉ)
        if ุจูุงูุงุช is not None:
            st.session_state['ุจูุงูุงุช'] = ุจูุงูุงุช
            st.session_state['ุฑูุฒ_ุงูุณูู'] = ุฑูุฒ_ุงูุณูู

# ุนุฑุถ ุงูุชุญููู ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุชุงุญุฉ
if 'ุจูุงูุงุช' in st.session_state:
    ุจูุงูุงุช = st.session_state['ุจูุงูุงุช']
    ุฑูุฒ_ุงูุณูู = st.session_state['ุฑูุฒ_ุงูุณูู']
    
    # ุงูุชุญูู ูู ูุฌูุฏ ุจูุงูุงุช ูุงููุฉ
    if ุจูุงูุงุช is not None and not ุจูุงูุงุช.empty and len(ุจูุงูุงุช) > 1:
        # ุฅูุดุงุก ูุงุฆู ุงูุชุญููู
        ูุญูู = ูุญูู_ููู(ุจูุงูุงุช, ุฑูุฒ_ุงูุณูู)
        
        # ุนุฑุถ ูุนูููุงุช ุฃุณุงุณูุฉ ุนู ุงูุณูู
        try:
            col1, col2, col3, col4 = st.columns(4)
            with col1:
                st.metric("ุขุฎุฑ ุณุนุฑ ุฅุบูุงู", f"{ุจูุงูุงุช['Close'].iloc[-1]:.2f}")
            with col2:
                ุชุบููุฑ = ุจูุงูุงุช['Close'].iloc[-1] - ุจูุงูุงุช['Close'].iloc[-2]
                ูุณุจุฉ_ุงูุชุบููุฑ = (ุชุบููุฑ / ุจูุงูุงุช['Close'].iloc[-2]) * 100
                st.metric("ุงูุชุบูุฑ ุงููููู", f"{ุชุบููุฑ:.2f}", f"{ูุณุจุฉ_ุงูุชุบููุฑ:.2f}%")
            with col3:
                st.metric("ุฃุนูู ุณุนุฑ", f"{ุจูุงูุงุช['High'].iloc[-1]:.2f}")
            with col4:
                st.metric("ุฃุฏูู ุณุนุฑ", f"{ุจูุงูุงุช['Low'].iloc[-1]:.2f}")
        except Exception as e:
            st.warning(f"ูุง ูููู ุนุฑุถ ุจุนุถ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ: {e}")
        
        # ุนุฑุถ ุงูุชุญููู ุงููุทููุจ
        try:
            if ููุน_ุงูุชุญููู == "ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ":
                ุฑุณู, df_result = ูุญูู.ุชุญููู_ุงููุชูุณุทุงุช_ุงููุชุญุฑูุฉ(ูุชุฑุฉ_ูุตูุฑุฉ, ูุชุฑุฉ_ุทูููุฉ)
                st.plotly_chart(ุฑุณู, use_container_width=True)
                
                # ุนุฑุถ ุงูุชูุณูุฑ
                with st.expander("ุชูุณูุฑ ุงูุชุญููู"):
                    st.markdown("""
                    ### ุชูุณูุฑ ุชุญููู ุงููุชูุณุทุงุช ุงููุชุญุฑูุฉ
                    
                    - **ุงููุซูุซ ุงูุฃุฎุถุฑ (โฒ)**: ุฅุดุงุฑุฉ ุดุฑุงุก - ุนูุฏูุง ูุชูุงุทุน ุงููุชูุณุท ุงููุตูุฑ ููู ุงููุชูุณุท ุงูุทููู
                    - **ุงููุซูุซ ุงูุฃุญูุฑ (โผ)**: ุฅุดุงุฑุฉ ุจูุน - ุนูุฏูุง ูุชูุงุทุน ุงููุชูุณุท ุงููุตูุฑ ุชุญุช ุงููุชูุณุท ุงูุทููู
                    
                    **ูุตุงุฆุญ ููุชุฏุงูู**:
                    - ุงุชุฌุงู ุตุงุนุฏ: ุนูุฏูุง ูููู ุงููุชูุณุท ุงููุตูุฑ ููู ุงููุชูุณุท ุงูุทููู
                    - ุงุชุฌุงู ูุงุจุท: ุนูุฏูุง ูููู ุงููุชูุณุท ุงููุตูุฑ ุชุญุช ุงููุชูุณุท ุงูุทููู
                    """)
            
            elif ููุน_ุงูุชุญููู == "ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ (RSI)":
                ุฑุณู, df_result = ูุญูู.ุชุญููู_ูุคุดุฑ_ุงูููุฉ_ุงููุณุจูุฉ(ูุชุฑุฉ_rsi, ูุณุชูู_ุชุดุจุน_ุดุฑุงุก, ูุณุชูู_ุชุดุจุน_ุจูุน)
                st.plotly_chart(ุฑุณู, use_container_width=True)
                
                # ุนุฑุถ ุงูุชูุณูุฑ
                with st.expander("ุชูุณูุฑ ุงูุชุญููู"):
                    st.markdown(f"""
                    ### ุชูุณูุฑ ุชุญููู ูุคุดุฑ ุงูููุฉ ุงููุณุจูุฉ (RSI)
                    
                    - **ุงููุซูุซ ุงูุฃุฎุถุฑ (โฒ)**: ุฅุดุงุฑุฉ ุดุฑุงุก ูุญุชููุฉ - ุนูุฏูุง ููุฎูุถ ูุคุดุฑ RSI ุชุญุช ูุณุชูู ุชุดุจุน ุงูุจูุน ({ูุณุชูู_ุชุดุจุน_ุจูุน})
                    - **ุงููุซูุซ ุงูุฃุญูุฑ (โผ)**: ุฅุดุงุฑุฉ ุจูุน ูุญุชููุฉ - ุนูุฏูุง ูุฑุชูุน ูุคุดุฑ RSI ููู ูุณุชูู ุชุดุจุน ุงูุดุฑุงุก ({ูุณุชูู_ุชุดุจุน_ุดุฑุงุก})
                    
                    **ูุตุงุฆุญ ููุชุฏุงูู**:
                    - ููู RSI ููู {ูุณุชูู_ุชุดุจุน_ุดุฑุงุก}: ุงูุณูู ูู ุญุงูุฉ ุชุดุจุน ุดุฑุงุก (ูุฏ ูููู ูุจุงูุบูุง ูู ูููุชู)
                    - ููู RSI ุชุญุช {ูุณุชูู_ุชุดุจุน_ุจูุน}: ุงูุณูู ูู ุญุงูุฉ ุชุดุจุน ุจูุน (ูุฏ ูููู ูููููุง ุจุฃูู ูู ูููุชู)
                    - ููู RSI ุจูู {ูุณุชูู_ุชุดุจุน_ุจูุน} ู {ูุณุชูู_ุชุดุจุน_ุดุฑุงุก}: ุงูุณูู ูู ูุทุงู ูุชูุงุฒู
                    """)
            
            elif ููุน_ุงูุชุญููู == "ููุฌุงุช ุฅูููุช":
                ุฑุณู, df_result = ูุญูู.ุชุญููู_ููุฌุงุช_ุฅูููุช()
                st.plotly_chart(ุฑุณู, use_container_width=True)
                
                # ุนุฑุถ ุงูุชูุณูุฑ
                with st.expander("ุชูุณูุฑ ุงูุชุญููู"):
                    st.markdown("""
                    ### ุชูุณูุฑ ุชุญููู ููุฌุงุช ุฅูููุช
                    
                    ูุธุฑูุฉ ููุฌุงุช ุฅูููุช ุชูุชุฑุญ ุฃู ุญุฑูุฉ ุงูุณูู ุชุชุจุน ููุทูุง ูู 5 ููุฌุงุช ูู ุงุชุฌุงู ุงูุงุชุฌุงู ุงูุฑุฆูุณูุ ุชูููุง 3 ููุฌุงุช ุชุตุญูุญูุฉ:
                    
                    - **ุงูููุฌุงุช 1-5**: ุงูููุฌุงุช ุงูุฏุงูุนุฉ ูู ุงุชุฌุงู ุงูุงุชุฌุงู ุงูุฑุฆูุณู
                    - **ุงูููุฌุงุช A-C**: ุงูููุฌุงุช ุงูุชุตุญูุญูุฉ ุงููุนุงูุณุฉ ููุงุชุฌุงู ุงูุฑุฆูุณู
                    
                    **ููุงุญุธุฉ**: ูุฐุง ุชูููุฐ ูุจุณุท ูููุฌุงุช ุฅูููุช. ุงูุชุญููู ุงูุฏููู ูุชุทูุจ ุฎุจุฑุฉ ููุนุฑูุฉ ุฃุนูู ุจููุงุนุฏ ูุฃููุงุท ููุฌุงุช ุฅูููุช.
                    """)
            
            elif ููุน_ุงูุชุญููู == "ุนุฑุถ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ":
                st.subheader("ุจูุงูุงุช ุงูุณูู")
                st.dataframe(ุจูุงูุงุช.tail(20))
        except Exception as e:
            st.error(f"ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุชูููุฐ ุงูุชุญููู: {e}")
    else:
        st.warning(f"ูู ูุชู ุงูุนุซูุฑ ุนูู ุจูุงูุงุช ูุงููุฉ ููุฑูุฒ {ุฑูุฒ_ุงูุณูู}. ูุฑุฌู ุงูุชุญูู ูู ุฑูุฒ ุงูุณูู ูุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.")
else:
    st.info("ุฃุฏุฎู ุฑูุฒ ุงูุณูู ูุงุถุบุท ุนูู ุฒุฑ 'ุชุญููู' ููุจุฏุก.")
